{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/bot752/Desktop/code/code/@React_Udemy_Max/Practice_project_on_React_Router_with_backend_api/12-adv-starting-project/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/bot752/Desktop/code/code/@React_Udemy_Max/Practice_project_on_React_Router_with_backend_api/12-adv-starting-project/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{Form,useNavigate,useNavigation,useActionData,json,redirect}from\"react-router-dom\";import classes from\"./EventForm.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EventForm(_ref){var method=_ref.method,event=_ref.event;var data=useActionData();var navigate=useNavigate();var navigation=useNavigation();var isSubmitting=navigation.state===\"submitting\";function cancelHandler(){navigate(\"..\");}return/*#__PURE__*/_jsxs(Form,{method:method,className:classes.form,children:[data&&data.errors&&/*#__PURE__*/_jsx(\"ul\",{children:Object.values(data.errors).map(function(err){return/*#__PURE__*/_jsx(\"li\",{children:err},err);})}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{id:\"title\",type:\"text\",name:\"title\",required:true,defaultValue:event?event.title:\"\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",children:\"Image\"}),/*#__PURE__*/_jsx(\"input\",{id:\"image\",type:\"url\",name:\"image\",required:true,defaultValue:event?event.image:\"\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{id:\"date\",type:\"date\",name:\"date\",required:true,defaultValue:event?event.date:\"\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",name:\"description\",rows:\"5\",required:true,defaultValue:event?event.description:\"\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.actions,children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:cancelHandler,disabled:isSubmitting,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{disabled:isSubmitting,children:isSubmitting?\"Submitting...\":\"Save\"})]})]});}export default EventForm;export function action(_x){return _action.apply(this,arguments);}function _action(){_action=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref2){var request,params,method,data,eventData,url,eventId,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:request=_ref2.request,params=_ref2.params;method=request.method;_context.next=4;return request.formData();case 4:data=_context.sent;eventData={title:data.get(\"title\"),image:data.get(\"image\"),date:data.get(\"date\"),description:data.get(\"description\")};url=\"http://localhost:8080/events\";if(method===\"PATCH\"){eventId=params.eventId;url=\"http://localhost:8080/events/\"+eventId;}_context.next=10;return fetch(url,{method:method,headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(eventData)});case 10:response=_context.sent;if(!(response.status===422)){_context.next=13;break;}return _context.abrupt(\"return\",response);case 13:if(response.ok){_context.next=15;break;}throw json({message:\"Could not save event\"},{status:500});case 15:return _context.abrupt(\"return\",redirect(\"/events\"));case 16:case\"end\":return _context.stop();}},_callee);}));return _action.apply(this,arguments);}","map":{"version":3,"names":["Form","useNavigate","useNavigation","useActionData","json","redirect","classes","jsx","_jsx","jsxs","_jsxs","EventForm","_ref","method","event","data","navigate","navigation","isSubmitting","state","cancelHandler","className","form","children","errors","Object","values","map","err","htmlFor","id","type","name","required","defaultValue","title","image","date","rows","description","actions","onClick","disabled","action","_x","_action","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref2","request","params","eventData","url","eventId","response","wrap","_callee$","_context","prev","next","formData","sent","get","fetch","headers","body","JSON","stringify","status","abrupt","ok","message","stop"],"sources":["C:/Users/bot752/Desktop/code/code/@React_Udemy_Max/Practice_project_on_React_Router_with_backend_api/12-adv-starting-project/frontend/src/components/EventForm.js"],"sourcesContent":["import {\n  Form,\n  useNavigate,\n  useNavigation,\n  useActionData,\n  json,\n  redirect,\n} from \"react-router-dom\";\n\nimport classes from \"./EventForm.module.css\";\n\nfunction EventForm({ method, event }) {\n  const data = useActionData();\n  const navigate = useNavigate();\n  const navigation = useNavigation();\n\n  const isSubmitting = navigation.state === \"submitting\";\n\n  function cancelHandler() {\n    navigate(\"..\");\n  }\n\n  return (\n    <Form method={method} className={classes.form}>\n      {data && data.errors && (\n        <ul>\n          {Object.values(data.errors).map((err) => (\n            <li key={err}>{err}</li>\n          ))}\n        </ul>\n      )}\n      <p>\n        <label htmlFor=\"title\">Title</label>\n        <input\n          id=\"title\"\n          type=\"text\"\n          name=\"title\"\n          required\n          defaultValue={event ? event.title : \"\"}\n        />\n      </p>\n      <p>\n        <label htmlFor=\"image\">Image</label>\n        <input\n          id=\"image\"\n          type=\"url\"\n          name=\"image\"\n          required\n          defaultValue={event ? event.image : \"\"}\n        />\n      </p>\n      <p>\n        <label htmlFor=\"date\">Date</label>\n        <input\n          id=\"date\"\n          type=\"date\"\n          name=\"date\"\n          required\n          defaultValue={event ? event.date : \"\"}\n        />\n      </p>\n      <p>\n        <label htmlFor=\"description\">Description</label>\n        <textarea\n          id=\"description\"\n          name=\"description\"\n          rows=\"5\"\n          required\n          defaultValue={event ? event.description : \"\"}\n        />\n      </p>\n      <div className={classes.actions}>\n        <button type=\"button\" onClick={cancelHandler} disabled={isSubmitting}>\n          Cancel\n        </button>\n        <button disabled={isSubmitting}>\n          {isSubmitting ? \"Submitting...\" : \"Save\"}\n        </button>\n      </div>\n    </Form>\n  );\n}\n\nexport default EventForm;\n\nexport async function action({ request, params }) {\n  const method = request.method;\n  const data = await request.formData();\n\n  const eventData = {\n    title: data.get(\"title\"),\n    image: data.get(\"image\"),\n    date: data.get(\"date\"),\n    description: data.get(\"description\"),\n  };\n\n  let url = \"http://localhost:8080/events\";\n\n  if (method === \"PATCH\") {\n    const eventId = params.eventId;\n    url = \"http://localhost:8080/events/\" + eventId;\n  }\n\n  const response = await fetch(url, {\n    method: method,\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(eventData),\n  });\n\n  if (response.status === 422) {\n    return response;\n  }\n\n  if (!response.ok) {\n    throw json({ message: \"Could not save event\" }, { status: 500 });\n  }\n\n  return redirect(\"/events\");\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}